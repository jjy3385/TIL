# 4강.이중모드, 하드웨어 보호

## 이중모드(dual mode)

* 한 컴퓨터를 여러 사람이 동시에 사용하는 환경이 일반적
  * 또는 한 사람이 여러 개의 프로그램을 동시에 사용
* 사용자 프로그램에서 STOP 등 치명적인 명령을 사용하지 못하게 해야함
* 그래서 나온것이 이중모드
  * 관리자 모드와 사용자 모드로 나뉨
* 프로세서 안에 있는 레지스터에 모드를 나타내는 플래그를 둬서 구현

###  이중모드 시나리오

* 운영체제 서비스가 실행될때는 **관리자 모드**
* 사용자 프로그램이 실행될때는 **사용자 모드**
* 하드웨서/소프트웨어 인터럽트가 발생하면 **관리자 모드**로 바뀌면서 OS가 ISR(인터럽스 서비스 루틴) 수행
  * 마우스에서  CPU에 전기신호로 인터럽트를 보내면 CPU는 바로 관리자 모드 플래그를 1로 바꾸면서 ISR로 점프하는 방식, 그러므로 OS가 ISR을 수행하는 동안은 관리자 모드 값이 1 인 거임
* ISR이 끝나면 **다시 사용자 모드**
* 그러므로 컴퓨터는 끊임없이 사용자 모드와 관리자 모드를 왔다갔다하면서 작업을 처리하게됨

> 💡만약, 사용자 프로그램에서 STOP 같은 관리자 모드에서 사용할 수 있는 명령어를 실행하게 되면?
>
> 그럴 경우, CPU는 관리자 모드가 아닌 것을 확인한 후 내부 인터럽트가 발생시킴
>
> 내부 인터럽트를 처리하는 OS의 ISR로 점프하여 해당 명령을 실행한 프로그램을 강제 종료
>
> 그러므로 서버 컴퓨터처럼 중요한 컴퓨터에 일반 유저가 접근하여 중요도가 높은 명령을 내릴 수 없도록 제어

## 하드웨어 보호(Protection)

###  입출력장치 보호

### 메모리 보호

### CPU 보호